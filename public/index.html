<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>H·ªá Th·ªëng Ki·ªÉm Tra</title>
  <link rel="stylesheet" href="style.css"/>

  <script>
    // MathJax
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\

\[', '\\]

']],
        processEscapes: true
      },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre'] },
      startup: {
        pageReady: () => MathJax.startup.defaultPageReady().then(() => console.log('‚úÖ MathJax loaded'))
      }
    };
    window.renderMath = () => window.MathJax?.typesetPromise?.();

    // ENV: c√≥ th·ªÉ override b·∫±ng bi·∫øn m√¥i tr∆∞·ªùng Render (inject v√†o window.ENV)
    window.ENV = {
      // YouTube: ch·ªçn 1 video m·∫∑c ƒë·ªãnh (Sealock ho·∫∑c b·∫•t k·ª≥)
      YOUTUBE_VIDEO_ID: 'kQKkGqZf3nE', // b·∫°n thay ID t·∫°i Render: ENV.YOUTUBE_VIDEO_ID
      // Tools: n·∫øu kh√¥ng set ENV.TOOLS th√¨ d√πng m·∫∑c ƒë·ªãnh d∆∞·ªõi
      TOOLS: [
        { name: 'Google', url: 'https://google.com', icon: 'google' },
        { name: 'YouTube', url: 'https://youtube.com', icon: 'youtube' },
        { name: 'T·∫°o Slide', url: 'https://docs.google.com/presentation', icon: 'slides' },
        { name: 'Zoom', url: 'https://zoom.us', icon: 'zoom' },
        { name: 'MS Teams', url: 'https://teams.microsoft.com', icon: 'teams' },
        { name: 'M√°y t√≠nh', url: 'https://www.wolframalpha.com', icon: 'calculator' }
      ],
      // Troll video (gi·ªØ nguy√™n link n·ªïi ti·∫øng)
      TROLL_VIDEO_ID: 'dQw4w9WgXcQ'
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</head>
<body>
  <!-- Theme Toggle -->
  <button class="theme-toggle" id="themeToggle" aria-label="ƒê·ªïi giao di·ªán">
    <span class="theme-label">Light</span>
    <span class="theme-icon">‚òÄÔ∏è</span>
  </button>
  <!-- LOGIN PAGE -->
  <section id="loginPage" class="page active">
    <div class="login-wrapper">
      <!-- Tr√°i: Login Box -->
      <div class="login-left">
        <div class="login-box">
          <div class="logo">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <circle cx="12" cy="12" r="9"></circle>
              <path d="M8 12l2 2 4-4"></path>
            </svg>
          </div>
          <h1>H·ªá Th·ªëng Ki·ªÉm Tra</h1>
          <p class="subtitle">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ti·∫øp t·ª•c</p>

          <form id="loginForm">
            <div class="input-group">
              <input id="passwordInput" type="password" placeholder="M·∫≠t kh·∫©u..." autocomplete="current-password"/>
              <button type="button" id="togglePassword" class="toggle-password" aria-label="·∫®n/Hi·ªán m·∫≠t kh·∫©u">
                <span class="eye-open">üëÅÔ∏è</span>
                <span class="eye-closed" style="display:none;">üëÅÔ∏è‚Äçüó®Ô∏è</span>
              </button>
            </div>
            <button id="loginBtn" class="btn btn-primary" type="submit">
              <span class="btn-text">ƒêƒÉng nh·∫≠p</span>
              <span class="btn-loader">‚è≥</span>
            </button>
            <div id="loginError" class="error-message"></div>
          </form>

          <div class="info-text">
            <p><span class="info-icon">üë®‚Äçüè´</span> <strong>Gi√°o vi√™n:</strong> T·∫•t nhi√™n bi·∫øt m·∫≠t kh·∫©u r·ªìi</p>
            <p><span class="info-icon">üë©‚Äçüéì</span> <strong>H·ªçc sinh:</strong> Ki·∫øm m·∫≠t kh·∫©u r·ªìi v√†o l√†m l·∫π l√™n</p>
          </div>
        </div>
      </div>

      <!-- Ph·∫£i: YouTube + Tools -->
      <div class="login-right">
        <div class="content-wrapper">
          <h2>C√¥ng C·ª• H·ªó Tr·ª£ H·ªçc T·∫≠p</h2>

          <!-- Video YouTube (Sealock ho·∫∑c video ENV) -->
          <div class="video-wrapper">
            <div class="video-container">
              <iframe 
                id="youtubeVideo"
                src="" 
                title="Video h∆∞·ªõng d·∫´n"
                frameborder="0" 
                allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
          </div>

          <h3 class="section-title">C√¥ng c·ª• nhanh</h3>
          <div id="toolsGrid" class="tools-grid">
            <!-- S·∫Ω render t·ª´ ENV.TOOLS trong main.js -->
          </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
          <p>NMT ‚Äì D√πng AI code ra web n√†y ƒë√≥</p>
          <button id="backToHome" class="btn btn-footer">Wanna Help</button>
        </div>
      </div>
    </div>
  </section>
  <!-- TEACHER PAGE -->
  <section id="teacherPage" style="display:none;">
    <div class="container">
      <div class="header">
        <h2>B·∫£ng ƒëi·ªÅu khi·ªÉn gi√°o vi√™n</h2>
        <button id="logoutTeacher" class="btn">ƒêƒÉng xu·∫•t</button>
      </div>

      <div class="dashboard">
        <div class="card">
          <h3>Upload ƒë·ªÅ thi</h3>
          <form id="uploadForm">
            <div class="form-group">
              <label>File ƒë·ªÅ thi</label>
              <input type="file" id="examFile" accept=".docx,.pdf,.txt,.json"/>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Th·ªùi gian (ph√∫t)</label>
                <input type="number" id="timeMinutes" min="10" value="45"/>
              </div>
              <div class="form-group">
                <label>M·∫≠t kh·∫©u ƒë·ªÅ (tu·ª≥ ch·ªçn)</label>
                <input type="text" id="examPassword" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng d√πng"/>
              </div>
            </div>

            <!-- L√†m r√µ c√°c t√πy bi·∫øn tr·ªôn ƒë·ªÅ -->
            <div class="form-row">
              <div class="form-group">
                <label>Ph·∫ßn 1: Tr·ªôn</label>
                <select id="p1Mode">
                  <option value="none">Kh√¥ng</option>
                  <option value="questions">Tr·ªôn c√¢u h·ªèi</option>
                  <option value="options">Tr·ªôn ƒë√°p √°n</option>
                  <option value="both">Tr·ªôn c·∫£ c√¢u h·ªèi v√† ƒë√°p √°n</option>
                </select>
              </div>
              <div class="form-group">
                <label>Ph·∫ßn 2: Tr·ªôn</label>
                <select id="p2Mode">
                  <option value="none">Kh√¥ng</option>
                  <option value="questions">Tr·ªôn c√¢u h·ªèi & gi·ªØ nguy√™n th·ª© t·ª± c√¢u d·∫´n</option>
                  <option value="subquestions">Tr·ªôn c·∫£ c√¢u h·ªèi v√† c√¢u d·∫´n trong t·ª´ng c√¢u</option>
                  <option value="both">Tr·ªôn c·∫£ 2 (n·∫øu h·ªá th·ªëng h·ªó tr·ª£)</option>
                </select>
              </div>
              <div class="form-group">
                <label>Ph·∫ßn 3: Tr·ªôn</label>
                <select id="p3Mode">
                  <option value="none">Kh√¥ng</option>
                  <option value="questions">Tr·ªôn c√¢u h·ªèi</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>S·ªë phi√™n b·∫£n</label>
                <input type="number" id="variantCount" min="1" value="1"/>
              </div>
              <div class="form-group">
                <label><input type="checkbox" id="useAI"/> D√πng AI h·ªó tr·ª£ ph√¢n t√≠ch</label>
              </div>
            </div>

            <button class="btn btn-primary" type="submit">Upload</button>
            <div id="uploadMessage" class="message" style="display:none;"></div>
          </form>
        </div>

        <div class="card">
          <h3>Danh s√°ch ƒë·ªÅ thi</h3>
          <div id="examList" class="exams-list"></div>
        </div>

        <div class="card">
          <h3>B√†i n·ªôp g·∫ßn ƒë√¢y</h3>
          <div id="submissionsList" class="submissions-list"></div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>NMT ‚Äì D√πng AI code ra web n√†y ƒë√≥</p>
      <button id="backToHomeTeacher" class="btn"><span>Wanna Help</span></button>
    </div>
  </section>

  <!-- STUDENT INFO PAGE -->
  <!-- (gi·ªØ nguy√™n nh∆∞ b·∫°n g·ª≠i) -->
  <!-- EXAM PAGE -->
  <!-- (gi·ªØ nguy√™n nh∆∞ b·∫°n g·ª≠i) -->
  <!-- RESULT PAGE -->
  <!-- (gi·ªØ nguy√™n nh∆∞ b·∫°n g·ª≠i) -->
  <!-- MODAL CHI TI·∫æT ƒê·ªÄ -->
  <div id="examDetailModal" class="modal">
    <div class="modal-content">
      <button id="closeModal" class="close">‚úï</button>
      <h2>Chi ti·∫øt ƒë·ªÅ thi</h2>
      <div id="examDetailContent"></div>
      <div class="modal-actions">
        <button id="saveAnswers" class="btn btn-primary">L∆∞u ƒë√°p √°n ƒë√∫ng</button>
        <button id="sendReport" class="btn">G·ª≠i b√°o c√°o l·ªõp</button>
        <button id="deleteExam" class="btn">X√≥a ƒë·ªÅ</button>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
